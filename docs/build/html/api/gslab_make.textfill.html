

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>textfill &mdash; GSLab Make 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="unzip" href="gslab_make.unzip.html" />
    <link rel="prev" title="tablefill" href="gslab_make.tablefill.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> GSLab Make
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Specifying paths</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../documentation.html#general-logging-functions">General logging functions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="gslab_make.check_module_size.html">check_module_size</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.clear_dir.html">clear_dir</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.copy_externals.html">copy_externals</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.copy_inputs.html">copy_inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.copy_output.html">copy_output</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.end_makelog.html">end_makelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.execute_command.html">execute_command</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.get_modified_sources.html">get_modified_sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.link_externals.html">link_externals</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.link_inputs.html">link_inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.log_files_in_output.html">log_files_in_output</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.remove_dir.html">remove_dir</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_jupyter.html">run_jupyter</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_lyx.html">run_lyx</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_mathematica.html">run_mathematica</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_matlab.html">run_matlab</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_module.html">run_module</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_perl.html">run_perl</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_python.html">run_python</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_r.html">run_r</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_sas.html">run_sas</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_stat_transfer.html">run_stat_transfer</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.run_stata.html">run_stata</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.start_makelog.html">start_makelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.tablefill.html">tablefill</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">textfill</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.unzip.html">unzip</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.update_executables.html">update_executables</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.update_paths.html">update_paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.write_source_logs.html">write_source_logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.write_to_makelog.html">write_to_makelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="gslab_make.zip_dir.html">zip_dir</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html#sourcing-functions">Sourcing functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html#source-logging-functions">Source logging functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html#program-functions">Program functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html#utility-functions">Utility functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html#directory-functions">Directory functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html#repository-functions">Repository functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html#filling-functions">Filling functions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GSLab Make</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../documentation.html">Specifying paths</a> &raquo;</li>
        
      <li>textfill</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/gslab_make.textfill.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="textfill">
<h1>textfill<a class="headerlink" href="#textfill" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="gslab_make.textfill">
<code class="sig-name descname">textfill</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#gslab_make.textfill" title="Permalink to this definition">¶</a></dt>
<dd><p>Description:
textfill.py is a python module designed to copy sections of log files produced
by Stata to LyX files.</p>
<p>Usage:
Textfill takes as input log files produced by Stata (the input files) and a LyX
file with labels indicating where logs should be inserted (the template file),
and produces a LyX file (the output file) which includes sections of the input
files (as indicated by tags inside the input files) in the locations indicated
by the labels in the template file.</p>
<p>Textfill must first be imported to make.py.  This is typically achieved by
including the following lines:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">from</span> <span class="pre">gslab_fill.textfill</span> <span class="pre">import</span> <span class="pre">textfill</span>
<span class="pre">`</span></code></p>
<p>Once the module has been imported, the syntax used to call textfill is as follows:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>`
textfill( input = ‘input_file(s)’, template = ‘template_file’, output = ‘output_file’,</p>
<blockquote>
<div><p>[size = ‘size’], [remove_echoes = ‘True/False’] )</p>
</div></blockquote>
<p><a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a></p>
<p>The argument ‘input’ is a list of the text files containing the stata logs to be
copied to the LyX tables. If there are multiple input text files, they are listed as:
input = ‘input_file_1 input_file_2’. The argument ‘template’ is the user written LyX
file which contains the labels which will be replaced with sections of the log files.
The argument ‘output’ is the name of the filled LyX file to be produced. Note that this
file is created by textfill.py, and should not be edited manually by the user.</p>
<p>There are two optional arguments: ‘size’ and ‘remove_echoes’. The argument ‘size’
determines the size of inserted text relative to body text in the output file.
It accepts LaTeX font size arguments, and defaults to same size as body. The argument
‘remove_echoes’ determines whether or not Stata command echoes are removed from the
copied log.  It defaults to false.</p>
<p>Input files for textfill.py are log files produced by Stata. Sections of input files
to be inserted by textfill are indicated by tags printed by the stata command
‘insert_tags’, which is defined by a gslab ado file in gslab-econ/gslab_stata/gslab_misc/.</p>
<p>In the stata do file which produces the input logs, the user begins a tagged section
with the command:
insert_tag tag_name, open</p>
<p>This will insert the following line, which indicates the beginning of a tagged section
of the log, into the log file:
<cite>&lt;textfill_tag_name&gt;</cite></p>
<p>The user should now add lines to the do file which print the output they want to add to
the tagged section, followed by the line:
insert_tag tag_name, close</p>
<p>This inserts the following line to the log file, indicating the end of the tagged section:
<cite>&lt;/textfill_tag_name&gt;</cite></p>
<p>The LyX template file contains labels which determine where the tagged sections of the
input files are inserted. To insert a log section tagged as ‘tag_name’, in a particular
place in the LyX file, the user inserts a label object with the value ‘text:tag_name’
inside a ‘Text’ custom inset.  The ‘text:’ part of the label is mandatory. When textfill
is run, the tagged section of the input files will be inserted as text input at the
location of corresponding label in the LyX file.</p>
<p>Note that the ‘Text’ custom inset object is available from ‘Insert &gt; Custom Insets’ when
Lyx had been reconfigured with the custom module text.module. This module is available on
the repo at /admin/Computer Build Sheet/, and can be installed according to the instructions
in /admin/Computer Build Sheet/standard_build.pdf.</p>
<p>Note that label/tag names cannot be duplicated.  For a single template file, each block of
text to be inserted must have a unique label, and there must be one, and only one, section
of the input files tagged with that same label. Having multiple sections of the input files
or multiple labels in the template file with the same name will cause errors.</p>
<p>Note also that when a LyX file with a ‘text:’ label is opened in LyX, or when textfill.py is
run on it, LyX may issue a warning:
“The module text has been requested by this document but has not been found…”</p>
<p>This warning means that the custom module text.module has not been installed - see above.</p>
<p>The following is an example of code, which could appear in a Stata do file, used to produce
input for textfill.
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">insert_tag</span> <span class="pre">example_log,</span> <span class="pre">open</span>
<span class="pre">display</span> <span class="pre">&quot;test&quot;</span>
<span class="pre">insert_tag</span> <span class="pre">example_log,</span> <span class="pre">close</span>
<span class="pre">`</span></code></p>
<p>Suppose output from Stata is being logged in stata.log.  This code adds the following lines
to stata.log:</p>
<p><a href="#id7"><span class="problematic" id="id8">``</span></a>`
. insert_tag example_log, open
&lt;example_log&gt;</p>
<p>. display “test”
test</p>
<p>. insert_tag example_log, close
&lt;/example_log&gt;
<a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a></p>
<p>Suppose we have a LyX file, template.lyx, which contains a label with the value
“text:example_log”  (without the “”). The following textfill command,
<cite>textfill( input = ‘stata.log’, template = ‘template.lyx’, output = ‘output.lyx’ )</cite></p>
<p>would produce a file, output.lyx, identical to template.lyx, but with the label
“text:example.log” replaced with the verbatim input:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">.</span> <span class="pre">display</span> <span class="pre">&quot;test&quot;</span>
<span class="pre">test</span>
<span class="pre">`</span></code></p>
<p>The following command,
<a href="#id13"><span class="problematic" id="id14">`</span></a>textfill( input = ‘stata.log’, template = ‘template.lyx’,</p>
<blockquote>
<div><p>output = ‘output.lyx’, remove_echoes = True )`</p>
</div></blockquote>
<p>would produce output.lyx replacing the label with the verbatim input (removing Stata command echoes):</p>
<p><cite>test</cite></p>
<p>If an error occurs during the call to text, it will be displayed in the command window.
When make.py finishes, the user will be able to scroll up through the output and examine
any error messages.  Error messages, which include a description of the error type
and a traceback to the line of code where the error occurred, can also be returned as a
string object using the following syntax:</p>
<p><a href="#id15"><span class="problematic" id="id16">``</span></a>`
exitmessage = textfill( input = ‘input_file(s)’, template = ‘template_file’, output = ‘output_file’,</p>
<blockquote>
<div><p>[size = ‘size’], [remove_echoes = ‘True/False’] )</p>
</div></blockquote>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a></p>
<p>Lines can then be added to make.py to output this string to a log file using standard
Python and built in gslab_make commands.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gslab_make.unzip.html" class="btn btn-neutral float-right" title="unzip" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gslab_make.tablefill.html" class="btn btn-neutral float-left" title="tablefill" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Matthew Gentzkow

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>